<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE cyclogram>
<cyclogram version="1.0">
    <variables>
        <variable name="I" value="0" desc="Current, A"/>
        <variable name="I1" value="0" desc="Current, A"/>
        <variable name="I2" value="0" desc=""/>
        <variable name="NuA" value="0" desc="Angle (Nu)"/>
        <variable name="NuDestSt" value="30000" desc=""/>
        <variable name="NuI" value="0" desc="Max current (Nu)"/>
        <variable name="NuM" value="0" desc="Mode (Nu)"/>
        <variable name="NuS" value="0" desc="Steps (Nu)"/>
        <variable name="NuSDest" value="30000" desc=""/>
        <variable name="NuV" value="0" desc="Velocity (Nu)"/>
        <variable name="PsyA" value="0" desc="Angle (Psy)"/>
        <variable name="PsyDestSt" value="15000" desc=""/>
        <variable name="PsyI" value="0" desc="Max current (Psy)"/>
        <variable name="PsyM" value="0" desc="Mode (Psy)"/>
        <variable name="PsyS" value="0" desc="Steps (Psy)"/>
        <variable name="PsySDest" value="15000" desc=""/>
        <variable name="PsyV" value="0" desc="Velocity (Psy)"/>
        <variable name="T" value="0" desc="Temperature, °C"/>
        <variable name="TSF" value="0" desc="Temperature sensor presense flag"/>
        <variable name="U" value="27" desc=""/>
        <variable name="U(work)" value="27" desc=""/>
        <variable name="U1" value="27" desc=""/>
        <variable name="U2" value="0" desc=""/>
    </variables>
    <commands>
        <command type="TERMINATOR" id="1488866617379" name="START" cmd_type="BEGIN"/>
        <command type="BRANCH_BEGIN" id="1488866617380" name="Start"/>
        <command type="GO_TO_BRANCH" id="1488866617381"/>
        <command type="BRANCH_BEGIN" id="1488866617382" name="Cleanup"/>
        <command type="TERMINATOR" id="1488866617383" name="FINISH" cmd_type="END"/>
        <command type="ACTION_MODULE" id="1488866641979" module="POWER_UNIT_PNA" command="SET_VOLTAGE_AND_CURRENT" implicit_params="0">
            <input_params>
                <param name="Voltage, V" type="10" value="U(work)"/>
            </input_params>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1488866671895" module="POWER_UNIT_BUP" command="SET_VOLTAGE_AND_CURRENT" implicit_params="0">
            <input_params>
                <param name="Voltage, V" type="10" value="U1"/>
            </input_params>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1488866679733" module="POWER_UNIT_PNA" command="SET_POWER_STATE" implicit_params="0">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1488866690749" module="POWER_UNIT_BUP" command="SET_POWER_STATE" implicit_params="0">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1488866711722" module="POWER_UNIT_BUP" command="SET_POWER_STATE" implicit_params="1">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1488866728669" module="POWER_UNIT_PNA" command="SET_POWER_STATE" implicit_params="1">
            <input_params/>
            <output_params/>
        </command>
        <command type="BRANCH_BEGIN" id="1488866769622" name="Connect BUP"/>
        <command type="GO_TO_BRANCH" id="1488866769624"/>
        <command type="ACTION_MODULE" id="1488869271509" module="STM" command="SET_POWER_CHANNEL_STATE" implicit_params="6,0">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1488869279714" module="STM" command="SET_POWER_CHANNEL_STATE" implicit_params="1,0">
            <input_params/>
            <output_params/>
        </command>
        <command type="DELAY" id="1488869320010" delay="2000"/>
        <command type="ACTION_MODULE" id="1488869334711" module="STM" command="SET_POWER_CHANNEL_STATE" implicit_params="1,1">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1488869339395" module="STM" command="SET_POWER_CHANNEL_STATE" implicit_params="6,1">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1488876450128" module="MKO" command="RECEIVE_TEST_ARRAY" implicit_params="0">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1489124511097" module="MKO" command="SEND_TO_ANGLE_SENSOR" implicit_params="0">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1489124523438" module="MKO" command="SEND_TEST_ARRAY" implicit_params="0">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1489570543152" module="STM" command="SET_MKO_POWER_CHANNEL_STATE" implicit_params="1,0">
            <input_params/>
            <output_params/>
        </command>
        <command type="DELAY" id="1489570575373" delay="3000"/>
        <command type="ACTION_MODULE" id="1489570589446" module="MKO" command="START_MKO" implicit_params="0">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1489570624327" module="STM" command="SET_MKO_POWER_CHANNEL_STATE" implicit_params="1,1">
            <input_params/>
            <output_params/>
        </command>
        <command type="ACTION_MODULE" id="1489571154153" module="MKO" command="SEND_COMMAND_ARRAY" implicit_params="0">
            <input_params>
                <param name="Max current (Nu)" type="6" value="500"/>
                <param name="Max current (Psy)" type="6" value="500"/>
                <param name="Mode (Nu)" type="6" value="3"/>
                <param name="Mode (Psy)" type="6" value="3"/>
                <param name="Steps (Nu)" type="10" value="NuSDest"/>
                <param name="Steps (Psy)" type="10" value="PsySDest"/>
                <param name="Velocity (Nu)" type="6" value="5000"/>
                <param name="Velocity (Psy)" type="6" value="5000"/>
            </input_params>
            <output_params/>
        </command>
        <command type="BRANCH_BEGIN" id="1489571234040" name="Control"/>
        <command type="GO_TO_BRANCH" id="1489571234041"/>
        <command type="ACTION_MODULE" id="1489571242686" module="MKO" command="RECEIVE_COMMAND_ARRAY" implicit_params="0">
            <input_params/>
            <output_params>
                <param name="Angle (Nu)" type="10" value="NuA"/>
                <param name="Angle (Psy)" type="10" value="PsyA"/>
                <param name="Max current (Nu)" type="10" value="NuI"/>
                <param name="Max current (Psy)" type="10" value="PsyI"/>
                <param name="Mode (Nu)" type="10" value="NuM"/>
                <param name="Mode (Psy)" type="10" value="PsyM"/>
                <param name="Steps (Nu)" type="10" value="NuS"/>
                <param name="Steps (Psy)" type="10" value="PsyS"/>
                <param name="Temp.Sensor Flag" type="10" value="TSF"/>
                <param name="Temperature, °C" type="10" value="T"/>
                <param name="Velocity (Nu)" type="10" value="NuV"/>
                <param name="Velocity (Psy)" type="10" value="PsyV"/>
            </output_params>
        </command>
        <command type="DELAY" id="1489571254273" delay="2000"/>
        <command type="QUESTION" id="1489571279814" operation="GreaterOrEqual" orientation="YesDown" cmd_type="SWITCH_STATE">
            <operand id="Left" type="Variable" value="4969" variable="PsyS"/>
            <operand id="Right" type="Variable" value="0" variable="PsySDest"/>
        </command>
        <command type="GO_TO_BRANCH" id="1489571279817"/>
        <command type="QUESTION" id="1489571362772" operation="GreaterOrEqual" orientation="YesDown" cmd_type="SWITCH_STATE">
            <operand id="Left" type="Variable" value="5039" variable="NuS"/>
            <operand id="Right" type="Variable" value="0" variable="NuSDest"/>
        </command>
        <command type="GO_TO_BRANCH" id="1489571362775"/>
        <command type="ACTION_MODULE" id="1489571538361" module="MKO" command="STOP_MKO" implicit_params="0">
            <input_params/>
            <output_params/>
        </command>
        <command type="DELAY" id="1489571551385" delay="152"/>
        <command type="ACTION_MODULE" id="1489572533943" module="STM" command="SET_MKO_POWER_CHANNEL_STATE" implicit_params="1,1">
            <input_params/>
            <output_params/>
        </command>
        <command type="DELAY" id="1489572568336" delay="193"/>
        <command type="ACTION_MODULE" id="1489576123654" module="POWER_UNIT_BUP" command="GET_VOLTAGE_AND_CURRENT" implicit_params="0">
            <input_params/>
            <output_params>
                <param name="Current, A" type="10" value="I1"/>
                <param name="Voltage, V" type="10" value="U1"/>
            </output_params>
        </command>
        <command type="ACTION_MODULE" id="1489576139213" module="POWER_UNIT_PNA" command="GET_VOLTAGE_AND_CURRENT" implicit_params="0">
            <input_params/>
            <output_params>
                <param name="Current, A" type="10" value="I2"/>
                <param name="Voltage, V" type="10" value="U2"/>
            </output_params>
        </command>
    </commands>
    <tree>
        <item id="1488866617379" down="1488866617380" right="-1" under_arrow="-1"/>
        <item id="1488866617380" down="1489572533943" right="-1" under_arrow="-1"/>
        <item id="1488866617381" down="1488866769622" right="-1" under_arrow="-1"/>
        <item id="1488866617382" down="1488869339395" right="-1" under_arrow="-1"/>
        <item id="1488866617383" down="-1" right="-1" under_arrow="-1"/>
        <item id="1488866641979" down="1488866671895" right="-1" under_arrow="-1"/>
        <item id="1488866671895" down="1488866679733" right="-1" under_arrow="-1"/>
        <item id="1488866679733" down="1488866690749" right="-1" under_arrow="-1"/>
        <item id="1488866690749" down="1489570543152" right="-1" under_arrow="-1"/>
        <item id="1488866711722" down="1488866728669" right="-1" under_arrow="-1"/>
        <item id="1488866728669" down="1489571538361" right="-1" under_arrow="-1"/>
        <item id="1488866769622" down="1488869271509" right="-1" under_arrow="-1"/>
        <item id="1488866769624" down="1489571234040" right="-1" under_arrow="-1"/>
        <item id="1488869271509" down="1488869279714" right="-1" under_arrow="-1"/>
        <item id="1488869279714" down="1488869320010" right="-1" under_arrow="-1"/>
        <item id="1488869320010" down="1489124511097" right="-1" under_arrow="-1"/>
        <item id="1488869334711" down="1488866711722" right="-1" under_arrow="-1"/>
        <item id="1488869339395" down="1488869334711" right="-1" under_arrow="-1"/>
        <item id="1488876450128" down="1489571154153" right="-1" under_arrow="-1"/>
        <item id="1489124511097" down="1489124523438" right="-1" under_arrow="-1"/>
        <item id="1489124523438" down="1488876450128" right="-1" under_arrow="-1"/>
        <item id="1489570543152" down="1489570575373" right="-1" under_arrow="-1"/>
        <item id="1489570575373" down="1489570589446" right="-1" under_arrow="-1"/>
        <item id="1489570589446" down="1488866617381" right="-1" under_arrow="-1"/>
        <item id="1489570624327" down="1488866617383" right="-1" under_arrow="-1"/>
        <item id="1489571154153" down="1488866769624" right="-1" under_arrow="-1"/>
        <item id="1489571234040" down="1489571254273" right="-1" under_arrow="-1"/>
        <item id="1489571234041" down="1488866617382" right="-1" under_arrow="-1"/>
        <item id="1489571242686" down="1489571279814" right="-1" under_arrow="-1"/>
        <item id="1489571254273" down="1489576123654" right="-1" under_arrow="-1"/>
        <item id="1489571279814" down="1489571362772" right="1489571279817" under_arrow="-1"/>
        <item id="1489571279817" down="1489571234040" right="-1" under_arrow="-1"/>
        <item id="1489571362772" down="1489571234041" right="1489571362775" under_arrow="-1"/>
        <item id="1489571362775" down="1489571234040" right="-1" under_arrow="-1"/>
        <item id="1489571538361" down="1489571551385" right="-1" under_arrow="-1"/>
        <item id="1489571551385" down="1489570624327" right="-1" under_arrow="-1"/>
        <item id="1489572533943" down="1489572568336" right="-1" under_arrow="-1"/>
        <item id="1489572568336" down="1488866641979" right="-1" under_arrow="-1"/>
        <item id="1489576123654" down="1489576139213" right="-1" under_arrow="-1"/>
        <item id="1489576139213" down="1489571242686" right="-1" under_arrow="-1"/>
    </tree>
</cyclogram>
